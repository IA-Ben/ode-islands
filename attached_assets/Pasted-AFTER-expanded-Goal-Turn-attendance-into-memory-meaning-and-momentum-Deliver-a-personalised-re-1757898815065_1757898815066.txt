AFTER (expanded)

Goal: Turn attendance into memory, meaning and momentum. Deliver a personalised recap and artefacts, enable sharing and community, and drive sustained engagement (merch, follow‑ups) — all with strong privacy controls.

5.1 Entry Conditions & Session Closure

Auto‑switch to After when:

Show Session ends (server timecode reaches end or operator presses End Show), or

User leaves the venue geofence for >15 minutes, or

User opens the app ≥ D+1.

A Post‑Show Session (24 h) is created for rendering heavy jobs (messages, galleries) with background sync.

5.2 Audience UX (Home)

Hero Recap card at top; below it: Message, Wallet, Gallery, Merch, Community.

Soft celebration micro‑animation; dark or light theme per system setting.

5.3 Recap

Timeline recap of the attendee’s journey:

Prologue tone; chapters stamped; poll choices; tasks completed; AR captures; keepsake(s).

Shareable Summary: export a single image (1080×1920) with date/venue and user initials (optional).

Accuracy: idempotent reconciliation if offline scans sync late.

5.4 Personalised Message (Pipeline)

Inputs: { optional name/alias, prologue tone, chapter stamps, poll choices, task outcomes }.

Template: selected by event; contains script, lower‑third overlays, SFX/music stems.

Renderer:

Local compile of lower‑thirds + server‑side compositing for final (30–60 s) MP4.

SLO: first render completes ≤30 s P95 after request; cached for 30 days.

Variants: portrait (1080×1920) primary; landscape optional.

Accessibility: burned‑in captions EN (others via subtitles); transcript downloadable.

Privacy: user name is optional; no biometric data or voice cloning; delete on request.

5.5 Memory Wallet v2 (Fuse)

Tokens included: Chapter Stamps, Keystoned Keepsake, Signature Card (from message), micro‑rewards.

Fuse Recipe:

v1 (pre‑show) + Post‑Show tokens → Memory Crystal v2 (animated GLB + poster image).

Optional variant tint determined by prologue tone and poll path.

On‑chain (optional later): export to a user wallet as a minted collectible; default is off‑chain.

Share: social card generator with safe framing (no other attendees shown).

5.6 Gallery (Curated + Community Mosaic)

Curated gallery: official stills/clips selected by the artist/operator.

Community mosaic: attendees may opt‑in to share their Keepsake; basic moderation queue.

Moderation: staff approve/decline with reasons; attendees can withdraw posts; report/takedown flow.

Performance: lazy‑loaded grid; server auto‑generates three sizes (thumb, medium, full) and short previews.

5.7 Merch & Offers

SKUs: pins (Nors/Orans), posters (print‑on‑demand), AR poster (unlocks at home), apparel (optional).

Discount logic: attendee auto‑applied code; bundles (Poster + Pin; Poster + AR Poster) with time‑ltd upsell.

Fulfilment: Stripe checkout → fulfilment URL; order status deep‑link.

Stock/Pre‑order: limited drops with countdown; waitlist sign‑up when OOS.

5.8 Community & Follow‑on Loop

Join the world: mailing list opt‑in, Discord/club invite, local events.

Next experiences: recommended events based on tone/path; one‑tap Add to Wishlist.

Calendar: add reminders for drops and future shows.

5.9 Loyalty & Progression (Optional)

Points for completing After actions (watch message, fuse crystal, share recap, join community).

Badges: ‘Calmed the Storm’, ‘All Chapters’, ‘Early Supporter’ etc.

Referrals: unique referral code; earn points when a friend claims a ticket.

5.10 Data Portability

Download my data: JSON export of tokens, stamps, choices and timestamps.

Delete my artefacts: one‑tap request queues purge of message video and gallery posts.

5.11 Feedback & Surveys

1‑tap NPS with optional free‑text; separate Accessibility feedback form.

Operator view aggregates responses by performance date.

5.12 Operator/Artist Tools (Post‑Show)

Render Queue: monitor personalised message jobs; retry/regen; see failure reasons.

Gallery Curation: approve/decline attendee submissions; reorder curated items.

Merch Analytics: sales by SKU, conversion from After notifications, cohort splits.

Retention Dashboards: D+1/D+7 opens, crystal fuse rate, community joins.

5.13 APIs (After)

GET /recap/:ticket_id → journey summary

POST /message/personalise → render request; returns job_id

GET /message/job/:job_id → status + asset URLs

POST /wallet/fuse → returns MemoryCrystal v2

POST /gallery/submit → upload attendee keepsake (with consent flag)

POST /gallery/moderate → approve/decline (staff)

GET /merch → SKUs + availability; POST /checkout → Stripe session

POST /feedback/nps → score + optional comment

POST /account/export and POST /account/delete_artifacts

5.14 Performance & Offline

All recap and wallet views work offline with last known data; updates reconcile on sync.

Personalised message: progressive delivery — poster still first, then video when ready.

Image/video assets use adaptive bitrate; device storage capped with LRU eviction.

5.15 Accessibility

Captions on all videos; transcripts; high‑contrast mode; screen‑reader labels; motion‑reduced animations.

5.16 Security & Privacy

No public listing of attendee names by default; gallery posts anonymised unless user opts to display alias.

Personalised videos are private links; tokenised for sharing; can be invalidated on delete.

5.17 Acceptance Criteria (After)

Personalised message render ≤30 s P95; failure rate <1% with automatic retry.

Memory Crystal v2 fuse completes <2 s on device; shares in <1 s.

Gallery moderation median time <12 h; 0 critical crashes in After flows during P95 devices.

5.18 Success Metrics

D+1 open rate ≥40%; Crystal v2 fuse rate ≥60% of attendees; Gallery opt‑in ≥20%; Merch conversion ≥10% by D+7; NPS ≥45.

5.19 QA Checklist

Offline recap load; late sync reconciliation; message render retry; watermarking; merch discount edge cases; consent toggles; delete/export flows; screen‑reader announcements.

5.20 Optional Extras (Roadmap)

AR Poster at Home: scan your print to reveal a looping scene; adds a home‑mode token.

Crystal Room: interactive 3D view of your Memory Crystal with subtle audio react.

Creator Notes: optional director’s commentary mini‑clips unlocked for superfans.

6) CMS & Data Model
6.1 Core Entities

Event { id, title, venue, geo, start_at, end_at, ssid[], brand, theme }

Ticket { id, event_id, user_id, state, seat?, qr_code }

ContentItem { id, event_id, mode: Before|Event|After, type, body, media[], unlock_rules[] }

UnlockRule { id, kind: time|geo|ssid|qr|progress|role, params }

Poll { id, event_id, question, options[], opens_at, closes_at, results }

Checkpoint { id, event_id, code, chapter, reward_token }

Task { id, event_id, kind, threshold, reward_token }

Token { id, user_id, event_id, kind, meta }

MemoryCrystal { id, user_id, event_id, version, token_ids[] }

MessageTemplate { id, event_id, script, audio_stems, overlays }

MerchSKU { id, title, price, stock, fulfilment_url }

6.2 API (REST-ish)

GET /events/:id — event context

GET /events/:id/content?mode=Before|Event|After

POST /unlock — evaluate rule set; returns unlocked items

POST /scan — { checkpoint_code } → award stamp

POST /poll/:id/vote — { option_id }

POST /task/:id/complete — { score }

POST /wallet/fuse — returns MemoryCrystal

POST /message/personalise — generate personalised asset