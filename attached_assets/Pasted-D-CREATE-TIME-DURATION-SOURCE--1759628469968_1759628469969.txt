D                                    CREATE_TIME                DURATION  SOURCE                                                                                     IMAGES                                         STATUS
21d6a1b4-bdea-4a62-b98e-edcf750a2dd4  2025-10-05T01:33:18+00:00  1M58S     gs://ode-islands_cloudbuild/source/1759627997.110628-f3a9336630a24ed48d5b4ca2a93ebeb0.tgz  gcr.io/ode-islands/video-transcoder (+1 more)  SUCCESS
benjamindawson@Benjamins-MacBook-Pro video-pipeline % gcloud run deploy video-transcoder \
  --image "gcr.io/ode-islands/video-transcoder" \
  --platform managed \
  --region us-central1 \
  --cpu 4 \
  --memory 16Gi \
  --timeout 900 \
  --max-instances 10 \
  --service-account "video-transcoder-sa@ode-islands.iam.gserviceaccount.com" \
  --set-env-vars "GCS_INPUT_BUCKET=ode-islands-video-input,GCS_OUTPUT_BUCKET=ode-islands-video-cdn" \
  --allow-unauthenticated \
  --project="ode-islands"

Deploying container to Cloud Run service [video-transcoder] in project [ode-islands] region [us-central1]
✓ Deploying... Done.                                                           
  ✓ Creating Revision...                                                       
  ✓ Routing traffic...                                                         
  ✓ Setting IAM Policy...                                                      
Done.                                                                          
Service [video-transcoder] revision [video-transcoder-00005-v8w] has been deployed and is serving 100 percent of traffic.
Service URL: https://video-transcoder-44512761031.us-central1.run.app
benjamindawson@Benjamins-MacBook-Pro video-pipeline % curl https://video-transcoder-44512761031.us-central1.run.app/health
{"memory":{"available_mb":16313.18359375,"emergency_mode":false,"memory_mb":46.31640625,"memory_percent":0.4,"quality_reduced":false,"recommendation":"NORMAL","status":"active"},"status":"healthy"}
benjamindawson@Benjamins-MacBook-Pro video-pipeline % cd ~/video-pipeline
cat > .env.gcp << 'EOF'
# GCP Video Pipeline Configuration
# Copy these to Replit Secrets (Tools → Secrets)
GOOGLE_APPLICATION_CREDENTIALS=./gcp-credentials.json
CLOUD_RUN_TRANSCODER_URL=https://video-transcoder-44512761031.us-central1.run.app
GCS_INPUT_BUCKET=ode-islands-video-input
GCS_CDN_BUCKET=ode-islands-video-cdn
NEXT_PUBLIC_CDN_URL=https://storage.googleapis.com/ode-islands-video-cdn
GCP_PROJECT_ID=ode-islands
GCP_REGION=us-central1
EOF
echo "✅ .env.gcp file created!"
cat .env.gcp
dquote> 